<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans   
        http://www.springframework.org/schema/beans/spring-beans-4.1.xsd   
        http://www.springframework.org/schema/context   
        http://www.springframework.org/schema/context/spring-context-4.1.xsd   
        http://www.springframework.org/schema/aop   
        http://www.springframework.org/schema/aop/spring-aop-4.1.xsd   
        http://www.springframework.org/schema/tx   
        http://www.springframework.org/schema/tx/spring-tx-4.1.xsd"
	default-autowire="byName">
	
	<!-- 安全边界前置代理数据库，用户名和密码默认分别为root/sa -->
  <bean id="boundaryDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://127.0.0.1:3306/boundary_ga?autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;mysqlEncoding=utf8" />
    <property name="user" value="root" />
    <property name="password" value="sa" />
    <property name="acquireIncrement" value="5" />
    <!-- 当连接池中的连接用完时，C3P0一次性创建新连接的数目2 -->
    <property name="initialPoolSize" value="5" />
    <!-- 初始化时创建的连接数，必须在minPoolSize和maxPoolSize之间 -->
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="5" />
    <!-- 最大空闲时间，超过空闲时间的连接将被丢弃
     	[需要注意：mysql默认的连接时长为8小时(28800）【可在my.ini中添加 wait_timeout=30(单位秒)设置连接超时】,这里设置c3p0的超时必须<28800] -->
    <property name="maxIdleTime" value="300" />
    <property name="idleConnectionTestPeriod" value="60" />
    <!-- 每60秒检查连接池中的空闲连接 -->
    <property name="maxStatements" value="5" />
    <!-- jdbc的标准参数  用以控制数据源内加载的PreparedStatement数量，但由于预缓存的Statement属 于单个Connection而不是整个连接 -->
  </bean>
  
  <!-- JDBC操作模板 -->
  <bean id="boundaryJdbcTemplate" class ="org.springframework.jdbc.core.JdbcTemplate">
    <property name ="dataSource" ref="boundaryDataSource"/>
  </bean>
	
	<!-- 边界前置服务器系统配置 -->
	<bean id="com.np.atms.cms.proxy.pss.system.boundary.PssBoundaryConfig" class="com.np.atms.cms.proxy.pss.system.boundary.PssBoundaryConfig">
		<!-- 是否开启 -->
		<property name="enable" value="true"/>
		<!-- 定时写入时间间隔 （小时） -->
		<property name="writeTimedExecution" value="0"/>
		<!-- 违法记录延时上传时间（小时） -->
		<property name="delayUploadTime" value="0"/>
		<!-- 违法数据过期时间（天）-->
		<property name="daysOverdue" value="15"/>
		<!-- 是否限制上传图片大小，true:是，false:否，默认false-->
		<property name="enableLimitImageSize" value="false"/>
		<!-- 图片最大大小（KB）-->
		<property name="maxImageSize" value="1500"/>
		<!-- 尝试下载违法图片次数, 默认5次 -->
		<property name="tryDownloadImgCount" value="5"/>
		<!-- 未配置公安网违法系统备案的设备编码直接设置为上传失败 -->
		<property name="enableUploadFailure" value="true"/>
		<!-- bimg地址转换启用 -->
		<property name="enableNginxBimgAddress" value="false"/>
		<!-- bimg地址 -->
		<property name="nginxBimgAddress" value="http://10.43.255.160:18080/bimg/" />
		<!-- 违法代码映射 key: 中盟平台违法代码, value: 公安交通集成指挥平台核心版违法代码 -->
		<property name="vioCodeMap">
			<map key-type="java.lang.String" value-type="java.lang.String">
			</map>
		</property>
		
		<!-- 前置服务器ftp服务器IP，茂名:44.131.2.172 -->
		<property name="ftpIP" value="44.131.2"/>
		<!-- 前置服务器ftp端口 -->
		<property name="ftpPort" value="21"/>
		<!-- 前置服务器ftp用户名 -->
		<property name="ftpUser" value="vio"/>
		<!-- 前置服务器ftp密码 -->
		<property name="ftpPassword" value="vio"/>

	</bean>
	
	<!-- 边界前置服务器 -->
	<bean id="pssBoundary" class="com.np.atms.cms.proxy.pss.system.boundary.PssBoundary" init-method="init" destroy-method="unInit">
		<property name="pssBoundaryConfig" ref="com.np.atms.cms.proxy.pss.system.boundary.PssBoundaryConfig"/>
	</bean>

</beans>
